{"version":3,"sources":["../src/Application.js"],"names":["Application","constructor","options","arg2","arg3","arg4","arg5","Object","assign","width","height","settings","RENDER_OPTIONS","useGL","sharedTicker","_options","autoStart","sharedLoader","autoRender","renderer","stage","Container","isStage","_ticker","ticker","shared","Ticker","start","remove","render","add","UPDATE_PRIORITY","LOW","stop","view","screen","destroyChildren","destroy","removeView","stageOptions","oldTicker"],"mappings":"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","sourcesContent":["import settings from \"./settings\";\nimport Container from \"./display/Container\";\nimport { autoRenderer } from \"./autoRenderer\";\nimport { shared, Ticker } from \"./ticker\";\nimport { UPDATE_PRIORITY } from \"./const\";\n\nexport default class Application {\n  constructor(options, arg2, arg3, arg4, arg5) {\n    if (typeof options === \"number\") {\n      options = Object.assign(\n        {\n          width: options,\n          height: arg2 || settings.RENDER_OPTIONS.height,\n          useGL: !!arg4,\n          sharedTicker: !!arg5,\n        },\n        arg3\n      );\n    }\n\n    this._options = options = Object.assign(\n      {\n        autoStart: true,\n        sharedTicker: false,\n        useGL: false,\n        sharedLoader: false,\n        autoRender: false,\n      },\n      options\n    );\n\n    this.renderer = autoRenderer(options);\n    this.stage = new Container();\n    this.stage.isStage = true;\n\n    this._ticker = null;\n    if (options.autoRender) {\n      this.ticker = options.sharedTicker ? shared : new Ticker();\n    }\n\n    if (options.autoStart) {\n      this.start();\n    }\n  }\n\n  set ticker(ticker) {\n    if (this._ticker) this._ticker.remove(this.render, this);\n    this._ticker = ticker;\n\n    if (ticker) ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n  }\n\n  get ticker() {\n    return this._ticker;\n  }\n\n  render() {\n    this.renderer.render(this.stage);\n  }\n\n  stop() {\n    this.ticker && this.ticker.stop();\n  }\n\n  start() {\n    this.ticker && this.ticker.start();\n  }\n\n  get view() {\n    return this.renderer.view;\n  }\n\n  get screen() {\n    return this.renderer.screen;\n  }\n\n  destroyChildren(options) {\n    this.stage.destroyChildren(options);\n  }\n\n  destroy(removeView, stageOptions) {\n    if (this._ticker) {\n      const oldTicker = this._ticker;\n      this.ticker = null;\n      oldTicker.destroy();\n    }\n\n    this.stage.destroy(stageOptions);\n    this.renderer.destroy(removeView);\n\n    this.renderer = null;\n    this._options = null;\n    this.stage = null;\n  }\n}\n"],"file":"Application.js"}