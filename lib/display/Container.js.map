{"version":3,"sources":["../../src/display/Container.js"],"names":["sortChildren","a","b","zIndex","_lastSortedIndex","Container","DisplayObject","constructor","children","sortableChildren","sortDirty","onChildrenChange","addChild","child","argumentsLength","arguments","length","i","parent","removeChild","transform","_parentID","push","_boundsID","emit","addChildAt","index","Error","splice","swapChildren","child2","index1","getChildIndex","index2","indexOf","setChildIndex","currentIndex","getChildAt","removeChildAt","removeChildren","beginIndex","endIndex","begin","end","range","removed","RangeError","removeAllChildren","sortRequired","j","sort","updateTransform","worldAlpha","alpha","visible","calculateBounds","_bounds","clear","_calculateBounds","renderable","_mask","addBoundsMask","filterArea","addBoundsArea","addBounds","_lastBoundsID","renderWebGL","renderer","hasFilters","_renderAdvancedWebGL","_renderWebGL","flush","filters","mask","_enabledFilters","enabled","filterManager","pushFilter","maskManager","pushMask","popMask","popFilter","_renderCanvas","renderCanvas","destroy","options","destroyed","destroyChildren","oldChildren","width","scale","x","getLocalBounds","value","_width","height","y","_height","prototype","containerUpdateTransform"],"mappings":"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","sourcesContent":["import { removeItems } from \"../utils\";\nimport DisplayObject from \"./DisplayObject\";\n\nfunction sortChildren(a, b) {\n  if (a.zIndex === b.zIndex) {\n    return a._lastSortedIndex - b._lastSortedIndex;\n  }\n  return a.zIndex - b.zIndex;\n}\n\nexport default class Container extends DisplayObject {\n  constructor() {\n    super();\n    this.children = [];\n    this.sortableChildren = false;\n    this.sortDirty = false;\n  }\n\n  onChildrenChange() {\n    /* empty */\n  }\n\n  addChild(child) {\n    const argumentsLength = arguments.length;\n\n    if (argumentsLength > 1) {\n      for (let i = 0; i < argumentsLength; i++) {\n        this.addChild(arguments[i]);\n      }\n    } else {\n      if (child.parent) {\n        child.parent.removeChild(child);\n      }\n\n      child.parent = this;\n      this.sortDirty = true;\n      child.transform._parentID = -1;\n      this.children.push(child);\n      this._boundsID++;\n\n      this.onChildrenChange(this.children.length - 1);\n      child.emit(\"added\", this);\n    }\n\n    return child;\n  }\n\n  addChildAt(child, index) {\n    if (index < 0 || index > this.children.length) {\n      throw new Error(\n        `${child}addChildAt: The index ${index} supplied is out of bounds ${this.children.length}`\n      );\n    }\n\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n\n    child.parent = this;\n    this.sortDirty = true;\n    child.transform._parentID = -1;\n\n    this.children.splice(index, 0, child);\n    this._boundsID++;\n    this.onChildrenChange(index);\n    child.emit(\"added\", this);\n\n    return child;\n  }\n\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    this.onChildrenChange(index1 < index2 ? index1 : index2);\n  }\n\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n\n    if (index === -1) {\n      throw new Error(\n        \"The supplied DisplayObject must be a child of the caller\"\n      );\n    }\n\n    return index;\n  }\n\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(\n        `The index ${index} supplied is out of bounds ${this.children.length}`\n      );\n    }\n\n    const currentIndex = this.getChildIndex(child);\n\n    removeItems(this.children, currentIndex, 1); // remove from old position\n    this.children.splice(index, 0, child); // add at new position\n    this.onChildrenChange(index);\n  }\n\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  }\n\n  removeChild(child) {\n    const argumentsLength = arguments.length;\n\n    if (argumentsLength > 1) {\n      for (let i = 0; i < argumentsLength; i++) {\n        this.removeChild(arguments[i]);\n      }\n    } else {\n      const index = this.children.indexOf(child);\n\n      if (index === -1) return null;\n\n      child.parent = null;\n      // ensure child transform will be recalculated\n      child.transform._parentID = -1;\n      removeItems(this.children, index, 1);\n      this._boundsID++;\n      this.onChildrenChange(index);\n      child.emit(\"removed\", this);\n    }\n\n    return child;\n  }\n\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    child.parent = null;\n    child.transform._parentID = -1;\n    removeItems(this.children, index, 1);\n    this._boundsID++;\n    this.onChildrenChange(index);\n    child.emit(\"removed\", this);\n\n    return child;\n  }\n\n  removeChildren(beginIndex = 0, endIndex) {\n    const begin = beginIndex;\n    const end = typeof endIndex === \"number\" ? endIndex : this.children.length;\n    const range = end - begin;\n    let removed;\n\n    if (range > 0 && range <= end) {\n      removed = this.children.splice(begin, range);\n\n      for (let i = 0; i < removed.length; ++i) {\n        removed[i].parent = null;\n        if (removed[i].transform) {\n          removed[i].transform._parentID = -1;\n        }\n      }\n\n      this._boundsID++;\n      this.onChildrenChange(beginIndex);\n\n      for (let i = 0; i < removed.length; ++i) {\n        removed[i].emit(\"removed\", this);\n      }\n\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return [];\n    }\n\n    throw new RangeError(\n      \"removeChildren: numeric values are outside the acceptable range.\"\n    );\n  }\n\n  removeAllChildren() {\n    for (let i = this.children.length - 1; i >= 0; i--) {\n      this.removeChild(this.children[i]);\n    }\n  }\n\n  sortChildren() {\n    let sortRequired = false;\n    for (let i = 0, j = this.children.length; i < j; ++i) {\n      const child = this.children[i];\n      child._lastSortedIndex = i;\n      if (!sortRequired && child.zIndex !== 0) {\n        sortRequired = true;\n      }\n    }\n\n    if (sortRequired && this.children.length > 1) {\n      this.children.sort(sortChildren);\n    }\n    this.sortDirty = false;\n  }\n\n  updateTransform() {\n    if (this.sortableChildren && this.sortDirty) {\n      this.sortChildren();\n    }\n\n    this._boundsID++;\n    this.transform.updateTransform(this.parent.transform);\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n\n    for (let i = 0, j = this.children.length; i < j; ++i) {\n      const child = this.children[i];\n\n      if (child.visible) {\n        child.updateTransform();\n      }\n    }\n  }\n\n  calculateBounds() {\n    this._bounds.clear();\n    this._calculateBounds();\n\n    for (let i = 0; i < this.children.length; i++) {\n      const child = this.children[i];\n      if (!child.visible || !child.renderable) {\n        continue;\n      }\n\n      child.calculateBounds();\n      if (child._mask) {\n        child._mask.calculateBounds();\n        this._bounds.addBoundsMask(child._bounds, child._mask._bounds);\n      } else if (child.filterArea) {\n        this._bounds.addBoundsArea(child._bounds, child.filterArea);\n      } else {\n        this._bounds.addBounds(child._bounds);\n      }\n    }\n\n    this._lastBoundsID = this._boundsID;\n  }\n\n  _calculateBounds() {\n    // FILL IN//\n  }\n\n  renderWebGL(renderer) {\n    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) return;\n\n    if (this._mask || this.hasFilters()) {\n      this._renderAdvancedWebGL(renderer);\n    } else {\n      this._renderWebGL(renderer);\n\n      let i, j;\n      for (i = 0, j = this.children.length; i < j; ++i) {\n        this.children[i].renderWebGL(renderer);\n      }\n    }\n  }\n\n  _renderAdvancedWebGL(renderer) {\n    renderer.flush();\n\n    const filters = this.filters;\n    const mask = this._mask;\n\n    if (filters && filters.length > 0) {\n      if (!this._enabledFilters) {\n        this._enabledFilters = [];\n      }\n\n      this._enabledFilters.length = 0;\n\n      for (let i = 0; i < filters.length; i++) {\n        if (filters[i].enabled) {\n          this._enabledFilters.push(filters[i]);\n        }\n      }\n\n      if (this._enabledFilters.length) {\n        renderer.filterManager.pushFilter(this, this._enabledFilters);\n      }\n    }\n\n    if (mask) {\n      renderer.maskManager.pushMask(this, this._mask);\n    }\n\n    this._renderWebGL(renderer);\n    for (let i = 0, j = this.children.length; i < j; i++) {\n      this.children[i].renderWebGL(renderer);\n    }\n\n    renderer.flush();\n\n    if (mask) {\n      renderer.maskManager.popMask(this, this._mask);\n    }\n\n    if (filters && this._enabledFilters && this._enabledFilters.length) {\n      renderer.filterManager.popFilter();\n    }\n  }\n\n  _renderWebGL(renderer) {\n    // this is where content itself gets rendered...\n  }\n\n  _renderCanvas(renderer) {\n    // this is where content itself gets rendered...\n  }\n\n  renderCanvas(renderer) {\n    // if not visible or the alpha is 0 then no need to render this\n    if (!this.visible || this.worldAlpha <= 0 || !this.renderable) {\n      return;\n    }\n\n    if (this._mask) {\n      renderer.maskManager.pushMask(this._mask);\n    }\n\n    this._renderCanvas(renderer);\n    for (let i = 0, j = this.children.length; i < j; ++i) {\n      this.children[i].renderCanvas(renderer);\n    }\n\n    if (this._mask) {\n      renderer.maskManager.popMask(renderer);\n    }\n  }\n\n  destroy(options) {\n    if (this.destroyed) return;\n\n    super.destroy();\n    this.sortDirty = false;\n    const destroyChildren =\n      typeof options === \"boolean\" ? options : options && options.children;\n    const oldChildren = this.removeChildren(0, this.children.length);\n\n    if (destroyChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n  }\n\n  destroyChildren(options) {\n    const oldChildren = this.removeChildren(0, this.children.length);\n    for (let i = 0; i < oldChildren.length; ++i) {\n      oldChildren[i].destroy(options);\n    }\n  }\n\n  get width() {\n    return this.scale.x * this.getLocalBounds().width;\n  }\n\n  set width(value) {\n    const width = this.getLocalBounds().width;\n\n    if (width !== 0) {\n      this.scale.x = value / width;\n    } else {\n      this.scale.x = 1;\n    }\n\n    this._width = value;\n  }\n\n  get height() {\n    return this.scale.y * this.getLocalBounds().height;\n  }\n\n  set height(value) {\n    const height = this.getLocalBounds().height;\n\n    if (height !== 0) {\n      this.scale.y = value / height;\n    } else {\n      this.scale.y = 1;\n    }\n\n    this._height = value;\n  }\n}\n\n// performance increase to avoid using call.. (10x faster)\nContainer.prototype.containerUpdateTransform =\n  Container.prototype.updateTransform;\n"],"file":"Container.js"}