{"version":3,"sources":["../../src/display/DisplayObject.js"],"names":["DisplayObject","EventEmitter","constructor","TransformClass","settings","TRANSFORM_MODE","STATIC","TransformStatic","Transform","tempDisplayObjectParent","transform","alpha","visible","renderable","parent","worldAlpha","filterArea","initScale","Point","filters","_enabledFilters","_bounds","Bounds","_boundsID","_lastBoundsID","_boundsRect","_localBoundsRect","_mask","_blur","_fxaa","maskEnabled","destroyed","id","_tempDisplayObjectParent","updateTransform","updateID","_recursivePostUpdateTransform","getBounds","skipUpdate","rect","calculateBounds","Rectangle","getRectangle","getLocalBounds","transformRef","parentRef","bounds","toGlobal","position","point","displayObjectUpdateTransform","worldTransform","apply","getGlobalPosition","x","y","toLocal","from","applyInverse","copyFromProxy","proxyObj","copyFunc","key","scale","copy","anchor","substitute","index","getChildIndex","removeChild","addChildAt","destroy","renderWebGL","renderer","renderCanvas","setParent","container","addChild","Error","setTransform","scaleX","scaleY","rotation","skewX","skewY","pivotX","pivotY","skew","pivot","setScaleToInit","copyScaleAndInit","attr","attrs","scaleInitX","scaleInitY","val","getAttr","value","localTransform","worldVisible","item","mask","isMask","hasFilters","length","blur","BlurFilter","fxaa","FXAAFilter","removeAllListeners","_currentBounds","interactive","interactiveChildren","prototype"],"mappings":"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","sourcesContent":["import EventEmitter from \"eventemitter3\";\nimport { TRANSFORM_MODE } from \"../const\";\nimport Bounds from \"./Bounds\";\nimport settings from \"../settings\";\nimport Transform from \"./Transform\";\nimport { uuidvx } from \"../utils\";\nimport { Rectangle, Point } from \"../math\";\nimport TransformStatic from \"./TransformStatic\";\nimport FXAAFilter from \"../filters/fxaa/FXAAFilter\";\nimport BlurFilter from \"../filters/blur/BlurFilter\";\n\nexport default class DisplayObject extends EventEmitter {\n  constructor() {\n    super();\n\n    const TransformClass =\n      settings.TRANSFORM_MODE === TRANSFORM_MODE.STATIC\n        ? TransformStatic\n        : Transform;\n\n    this.tempDisplayObjectParent = null;\n    this.transform = new TransformClass();\n    this.alpha = 1;\n    this.visible = true;\n    this.renderable = true;\n    this.parent = null;\n    this.worldAlpha = 1;\n    this.filterArea = null;\n    this.initScale = new Point(1, 1);\n\n    this.filters = null;\n    this._enabledFilters = null;\n    this._bounds = new Bounds();\n    this._boundsID = 0;\n    this._lastBoundsID = -1;\n    this._boundsRect = null;\n    this._localBoundsRect = null;\n    this._mask = null;\n    this._blur = 0;\n    this._fxaa = false;\n    this.maskEnabled = true;\n    this.destroyed = false;\n    this.id = uuidvx();\n  }\n\n  get _tempDisplayObjectParent() {\n    if (this.tempDisplayObjectParent === null) {\n      this.tempDisplayObjectParent = new DisplayObject();\n    }\n    return this.tempDisplayObjectParent;\n  }\n\n  updateTransform() {\n    this.transform.updateTransform(this.parent.transform);\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n    this._bounds.updateID++;\n  }\n\n  _recursivePostUpdateTransform() {\n    if (this.parent) {\n      this.parent._recursivePostUpdateTransform();\n      this.transform.updateTransform(this.parent.transform);\n    } else {\n      this.transform.updateTransform(this._tempDisplayObjectParent.transform);\n    }\n  }\n\n  getBounds(skipUpdate, rect) {\n    if (!skipUpdate) {\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.updateTransform();\n        this.parent = null;\n      } else {\n        this._recursivePostUpdateTransform();\n        this.updateTransform();\n      }\n    }\n\n    if (this._boundsID !== this._lastBoundsID && this.maskEnabled) {\n      this.calculateBounds();\n    }\n\n    if (!rect) {\n      if (!this._boundsRect) {\n        this._boundsRect = new Rectangle();\n      }\n      rect = this._boundsRect;\n    }\n\n    return this._bounds.getRectangle(rect);\n  }\n\n  getLocalBounds(rect) {\n    const transformRef = this.transform;\n    const parentRef = this.parent;\n    this.parent = null;\n    this.transform = this._tempDisplayObjectParent.transform;\n\n    if (!rect) {\n      if (!this._localBoundsRect) {\n        this._localBoundsRect = new Rectangle();\n      }\n      rect = this._localBoundsRect;\n    }\n\n    const bounds = this.getBounds(false, rect);\n    this.parent = parentRef;\n    this.transform = transformRef;\n    return bounds;\n  }\n\n  toGlobal(position, point, skipUpdate = false) {\n    if (!skipUpdate) {\n      this._recursivePostUpdateTransform();\n\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.displayObjectUpdateTransform();\n        this.parent = null;\n      } else {\n        this.displayObjectUpdateTransform();\n      }\n    }\n\n    return this.worldTransform.apply(position, point);\n  }\n\n  getGlobalPosition(point, skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this.position, point, skipUpdate);\n    } else {\n      point.x = this.position.x;\n      point.y = this.position.y;\n    }\n    return point;\n  }\n\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n\n    if (!skipUpdate) {\n      this._recursivePostUpdateTransform();\n\n      if (!this.parent) {\n        this.parent = this._tempDisplayObjectParent;\n        this.displayObjectUpdateTransform();\n        this.parent = null;\n      } else {\n        this.displayObjectUpdateTransform();\n      }\n    }\n\n    return this.worldTransform.applyInverse(position, point);\n  }\n\n  copyFromProxy(proxyObj) {\n    const copyFunc = key => {\n      if (proxyObj[key] !== null) {\n        this[key] = proxyObj[key];\n      }\n    };\n\n    copyFunc(\"x\");\n    copyFunc(\"y\");\n    copyFunc(\"text\");\n    copyFunc(\"style\");\n    copyFunc(\"width\");\n    copyFunc(\"height\");\n    copyFunc(\"alpha\");\n    copyFunc(\"rotation\");\n    copyFunc(\"blendMode\");\n    this.scale.copy(proxyObj.scale);\n    this.anchor.copy(proxyObj.anchor);\n  }\n\n  substitute(proxyObj) {\n    this.copyFromProxy(proxyObj);\n    const { parent } = proxyObj;\n\n    if (parent) {\n      const index = parent.getChildIndex(proxyObj);\n      parent.removeChild(proxyObj);\n      parent.addChildAt(this, index);\n    }\n\n    proxyObj.destroy();\n    proxyObj = null;\n  }\n\n  renderWebGL(renderer) {\n    // OVERWRITE;\n  }\n\n  renderCanvas(renderer) {\n    // OVERWRITE;\n  }\n\n  setParent(container) {\n    if (!container || !container.addChild) {\n      throw new Error(\"setParent: Argument must be a Container\");\n    }\n    container.addChild(this);\n    return container;\n  }\n\n  setTransform(\n    x = 0,\n    y = 0,\n    scaleX = 1,\n    scaleY = 1,\n    rotation = 0,\n    skewX = 0,\n    skewY = 0,\n    pivotX = 0,\n    pivotY = 0\n  ) {\n    this.position.x = x;\n    this.position.y = y;\n    this.scale.x = !scaleX ? 1 : scaleX;\n    this.scale.y = !scaleY ? 1 : scaleY;\n    this.rotation = rotation;\n    this.skew.x = skewX;\n    this.skew.y = skewY;\n    this.pivot.x = pivotX;\n    this.pivot.y = pivotY;\n\n    return this;\n  }\n\n  setScaleToInit() {\n    this.initScale.copy(this.scale);\n  }\n\n  copyScaleAndInit(scale) {\n    this.scale.copy(scale);\n    this.initScale.copy(scale);\n  }\n\n  attr(attrs) {\n    const scaleInitX = this.initScale.x;\n    const scaleInitY = this.initScale.y;\n\n    for (let key in attrs) {\n      const val = attrs[key];\n\n      switch (key) {\n        case \"scale\":\n          this.scale.x = val * scaleInitX;\n          this.scale.y = val * scaleInitY;\n          break;\n\n        case \"skew\":\n          this.skew.x = val;\n          this.skew.y = val;\n          break;\n\n        case \"rotate\":\n          this.rotation = val;\n          break;\n\n        default:\n          this[key] = val;\n      }\n    }\n  }\n\n  getAttr(key) {\n    let attr;\n    switch (key) {\n      case \"scale\":\n        attr = this.scale.x;\n        break;\n\n      case \"rotate\":\n        attr = this.rotation;\n        break;\n\n      default:\n        attr = this[key];\n    }\n\n    return attr;\n  }\n\n  get x() {\n    return this.position.x;\n  }\n\n  set x(value) {\n    this.transform.position.x = value;\n  }\n\n  get y() {\n    return this.position.y;\n  }\n\n  set y(value) {\n    this.transform.position.y = value;\n  }\n\n  get worldTransform() {\n    return this.transform.worldTransform;\n  }\n\n  get localTransform() {\n    return this.transform.localTransform;\n  }\n\n  get position() {\n    return this.transform.position;\n  }\n\n  set position(value) {\n    this.transform.position.copy(value);\n  }\n\n  get scale() {\n    return this.transform.scale;\n  }\n\n  set scale(value) {\n    this.transform.scale.copy(value);\n  }\n\n  get pivot() {\n    return this.transform.pivot;\n  }\n\n  set pivot(value) {\n    this.transform.pivot.copy(value);\n  }\n\n  get skew() {\n    return this.transform.skew;\n  }\n\n  set skew(value) {\n    this.transform.skew.copy(value);\n  }\n\n  get rotation() {\n    return this.transform.rotation;\n  }\n\n  set rotation(value) {\n    this.transform.rotation = value;\n  }\n\n  get worldVisible() {\n    let item = this;\n\n    do {\n      if (!item.visible) {\n        return false;\n      }\n\n      item = item.parent;\n    } while (item);\n\n    return true;\n  }\n\n  get mask() {\n    return this._mask;\n  }\n\n  set mask(value) {\n    if (this._mask) {\n      this._mask.renderable = true;\n      this._mask.isMask = false;\n    }\n\n    this._mask = value;\n\n    if (this._mask) {\n      this._mask.renderable = false;\n      this._mask.isMask = true;\n    }\n  }\n\n  hasFilters() {\n    if (this.filters && this.filters.length) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  set blur(blur = 0) {\n    this._blur = blur;\n\n    if (blur <= 0) {\n      this.filters = null;\n      return;\n    }\n\n    if (!this.filters) {\n      this.filters = [new BlurFilter()];\n    }\n\n    this.filters[0].blur = blur;\n  }\n\n  set fxaa(fxaa) {\n    if (fxaa === false) {\n      this.filters = null;\n      return;\n    }\n\n    if (!this.filters) {\n      this.filters = [new FXAAFilter()];\n    }\n  }\n\n  get fxaa() {\n    return this._fxaa;\n  }\n\n  get blur() {\n    return this._blur;\n  }\n\n  destroy() {\n    if (this.destroyed) return;\n\n    this.removeAllListeners();\n    if (this.parent) {\n      this.parent.removeChild(this);\n    }\n\n    this.blur = 0;\n    this.fxaa = false;\n    this.filters = null;\n    this.transform = null;\n    this.initScale = null;\n    this.parent = null;\n    this._bounds = null;\n    this._currentBounds = null;\n    this._mask = null;\n\n    this.filterArea = null;\n    this.interactive = false;\n    this.interactiveChildren = false;\n    this.destroyed = true;\n  }\n}\n\n// performance increase to avoid using call.. (10x faster)\nDisplayObject.prototype.displayObjectUpdateTransform =\n  DisplayObject.prototype.updateTransform;\n"],"file":"DisplayObject.js"}