{"version":3,"sources":["../../../src/filters/chroma/ChromaFilter.js"],"names":["ChromaFilter","Filter","constructor","rgbColor","similarity","smoothness","saturation","shadowness","color","Math","max","glShaderKey","uniforms","uColor","value","uSimilarity","uSmoothness","uSaturation","uShadowness"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;;;AACe,MAAMA,YAAN,SAA2BC,eAA3B,CAAkC;AAC/CC,EAAAA,WAAW,CAACC,QAAD,EAAWC,UAAX,EAA2BC,UAA3B,EAA2CC,UAA3C,EAA2DC,UAA3D,EAA2E;AAAA,QAAhEH,UAAgE;AAAhEA,MAAAA,UAAgE,GAArD,GAAqD;AAAA;;AAAA,QAAhDC,UAAgD;AAAhDA,MAAAA,UAAgD,GAArC,GAAqC;AAAA;;AAAA,QAAhCC,UAAgC;AAAhCA,MAAAA,UAAgC,GAArB,GAAqB;AAAA;;AAAA,QAAhBC,UAAgB;AAAhBA,MAAAA,UAAgB,GAAL,GAAK;AAAA;;AACpF,WACE;AADF,2RAGE;AAHF;AAOA,SAAKC,KAAL,GAAaL,QAAb;AACA,SAAKC,UAAL,GAAkBK,IAAI,CAACC,GAAL,CAASN,UAAT,EAAqB,KAArB,CAAlB;AACA,SAAKC,UAAL,GAAkBI,IAAI,CAACC,GAAL,CAASL,UAAT,EAAqB,KAArB,CAAlB;AACA,SAAKC,UAAL,GAAkBG,IAAI,CAACC,GAAL,CAASJ,UAAT,EAAqB,KAArB,CAAlB;AACA,SAAKC,UAAL,GAAkBE,IAAI,CAACC,GAAL,CAASH,UAAT,EAAqB,KAArB,CAAlB;AACA,SAAKI,WAAL,GAAmB,QAAnB;AACD;;AAEQ,MAALH,KAAK,GAAG;AACV,WAAO,KAAKI,QAAL,CAAcC,MAArB;AACD;;AAEQ,MAALL,KAAK,CAACM,KAAD,EAAQ;AACf,SAAKF,QAAL,CAAcC,MAAd,GAAuBC,KAAvB;AACD;;AAEa,MAAVV,UAAU,GAAG;AACf,WAAO,KAAKQ,QAAL,CAAcG,WAArB;AACD;;AAEa,MAAVX,UAAU,CAACU,KAAD,EAAQ;AACpB,SAAKF,QAAL,CAAcG,WAAd,GAA4BD,KAA5B;AACD;;AAEa,MAAVT,UAAU,GAAG;AACf,WAAO,KAAKO,QAAL,CAAcI,WAArB;AACD;;AAEa,MAAVX,UAAU,CAACS,KAAD,EAAQ;AACpB,SAAKF,QAAL,CAAcI,WAAd,GAA4BF,KAA5B;AACD;;AAEa,MAAVR,UAAU,GAAG;AACf,WAAO,KAAKM,QAAL,CAAcK,WAArB;AACD;;AAEa,MAAVX,UAAU,CAACQ,KAAD,EAAQ;AACpB,SAAKF,QAAL,CAAcK,WAAd,GAA4BH,KAA5B;AACD;;AAEa,MAAVP,UAAU,GAAG;AACf,WAAO,KAAKK,QAAL,CAAcM,WAArB;AACD;;AAEa,MAAVX,UAAU,CAACO,KAAD,EAAQ;AACpB,SAAKF,QAAL,CAAcM,WAAd,GAA4BJ,KAA5B;AACD;;AAvD8C","sourcesContent":["import Filter from \"../../renderers/webgl/filters/Filter\";\nimport { readFileSync } from \"fs\";\nimport { join } from \"path\";\nimport { rgb2hsl, str2rgb } from \"../../utils\";\nexport default class ChromaFilter extends Filter {\n  constructor(rgbColor, similarity=0.3, smoothness=0.1, saturation=0.1, shadowness=0.5) {\n    super(\n      // vertex shader\n      readFileSync(join(__dirname, \"../fragments/default.vert\"), \"utf8\"),\n      // fragment shader\n      readFileSync(join(__dirname, \"./chroma.frag\"), \"utf8\")\n    );\n\n    this.color = rgbColor;\n    this.similarity = Math.max(similarity, 0.001);\n    this.smoothness = Math.max(smoothness, 0.001);\n    this.saturation = Math.max(saturation, 0.001);\n    this.shadowness = Math.max(shadowness, 0.001);\n    this.glShaderKey = \"chroma\";\n  }\n\n  get color() {\n    return this.uniforms.uColor;\n  }\n\n  set color(value) {\n    this.uniforms.uColor = value;\n  }\n\n  get similarity() {\n    return this.uniforms.uSimilarity;\n  }\n\n  set similarity(value) {\n    this.uniforms.uSimilarity = value;\n  }\n\n  get smoothness() {\n    return this.uniforms.uSmoothness;\n  }\n\n  set smoothness(value) {\n    this.uniforms.uSmoothness = value;\n  }\n\n  get saturation() {\n    return this.uniforms.uSaturation;\n  }\n\n  set saturation(value) {\n    this.uniforms.uSaturation = value;\n  }\n\n  get shadowness() {\n    return this.uniforms.uShadowness;\n  }\n\n  set shadowness(value) {\n    this.uniforms.uShadowness = value;\n  }\n  \n}\n"],"file":"ChromaFilter.js"}