{"version":3,"sources":["../../src/ticker/TickerListener.js"],"names":["TickerListener","constructor","fn","context","priority","once","next","previous","destroyed","match","emit","deltaTime","call","redirect","destroy","connect","hard"],"mappings":";;;;;;;AAAe,MAAMA,cAAN,CAAqB;AAClCC,EAAAA,WAAW,CAACC,EAAD,EAAKC,OAAL,EAAqBC,QAArB,EAAmCC,IAAnC,EAAiD;AAAA,QAA5CF,OAA4C;AAA5CA,MAAAA,OAA4C,GAAlC,IAAkC;AAAA;;AAAA,QAA5BC,QAA4B;AAA5BA,MAAAA,QAA4B,GAAjB,CAAiB;AAAA;;AAAA,QAAdC,IAAc;AAAdA,MAAAA,IAAc,GAAP,KAAO;AAAA;;AAC1D,SAAKH,EAAL,GAAUA,EAAV;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,QAAL,GAAgB,IAAhB;AAEA,SAAKC,SAAL,GAAiB,KAAjB;AACD;;AAEDC,EAAAA,KAAK,CAACP,EAAD,EAAKC,OAAL,EAAc;AACjBA,IAAAA,OAAO,GAAGA,OAAO,IAAI,IAArB;AAEA,WAAO,KAAKD,EAAL,KAAYA,EAAZ,IAAkB,KAAKC,OAAL,KAAiBA,OAA1C;AACD;;AAEDO,EAAAA,IAAI,CAACC,SAAD,EAAY;AACd,QAAI,KAAKT,EAAT,EAAa;AACX,UAAI,KAAKC,OAAT,EAAkB;AAChB,aAAKD,EAAL,CAAQU,IAAR,CAAa,KAAKT,OAAlB,EAA2BQ,SAA3B;AACD,OAFD,MAEO;AACL,aAAKT,EAAL,CAAQS,SAAR;AACD;AACF;;AAED,QAAME,QAAQ,GAAG,KAAKP,IAAtB;;AAEA,QAAI,KAAKD,IAAT,EAAe;AACb,WAAKS,OAAL,CAAa,IAAb;AACD;;AAED,QAAI,KAAKN,SAAT,EAAoB;AAClB,WAAKF,IAAL,GAAY,IAAZ;AACD;;AAED,WAAOO,QAAP;AACD;;AAEDE,EAAAA,OAAO,CAACR,QAAD,EAAW;AAChB,SAAKA,QAAL,GAAgBA,QAAhB;;AACA,QAAIA,QAAQ,CAACD,IAAb,EAAmB;AACjBC,MAAAA,QAAQ,CAACD,IAAT,CAAcC,QAAd,GAAyB,IAAzB;AACD;;AACD,SAAKD,IAAL,GAAYC,QAAQ,CAACD,IAArB;AACAC,IAAAA,QAAQ,CAACD,IAAT,GAAgB,IAAhB;AACD;;AAEDQ,EAAAA,OAAO,CAACE,IAAD,EAAe;AAAA,QAAdA,IAAc;AAAdA,MAAAA,IAAc,GAAP,KAAO;AAAA;;AACpB,QAAI,KAAKR,SAAT,EAAoB;AAEpB,SAAKA,SAAL,GAAiB,IAAjB;AACA,SAAKN,EAAL,GAAU,IAAV;AACA,SAAKC,OAAL,GAAe,IAAf,CALoB,CAOpB;;AACA,QAAI,KAAKI,QAAT,EAAmB;AACjB,WAAKA,QAAL,CAAcD,IAAd,GAAqB,KAAKA,IAA1B;AACD;;AAED,QAAI,KAAKA,IAAT,EAAe;AACb,WAAKA,IAAL,CAAUC,QAAV,GAAqB,KAAKA,QAA1B;AACD,KAdmB,CAgBpB;;;AACA,QAAMM,QAAQ,GAAG,KAAKP,IAAtB,CAjBoB,CAmBpB;;AACA,SAAKA,IAAL,GAAYU,IAAI,GAAG,IAAH,GAAUH,QAA1B;AACA,SAAKN,QAAL,GAAgB,IAAhB;AAEA,WAAOM,QAAP;AACD;;AAzEiC","sourcesContent":["export default class TickerListener {\n  constructor(fn, context = null, priority = 0, once = false) {\n    this.fn = fn;\n    this.context = context;\n    this.priority = priority;\n    this.once = once;\n    this.next = null;\n    this.previous = null;\n\n    this.destroyed = false;\n  }\n\n  match(fn, context) {\n    context = context || null;\n\n    return this.fn === fn && this.context === context;\n  }\n\n  emit(deltaTime) {\n    if (this.fn) {\n      if (this.context) {\n        this.fn.call(this.context, deltaTime);\n      } else {\n        this.fn(deltaTime);\n      }\n    }\n\n    const redirect = this.next;\n\n    if (this.once) {\n      this.destroy(true);\n    }\n\n    if (this.destroyed) {\n      this.next = null;\n    }\n\n    return redirect;\n  }\n\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n\n  destroy(hard = false) {\n    if (this.destroyed) return;\n\n    this.destroyed = true;\n    this.fn = null;\n    this.context = null;\n\n    // Disconnect, hook up next and previous\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n\n    // Redirect to the next item\n    const redirect = this.next;\n\n    // Remove references\n    this.next = hard ? null : redirect;\n    this.previous = null;\n\n    return redirect;\n  }\n}\n"],"file":"TickerListener.js"}