{"version":3,"sources":["../../src/loaders/loader.js"],"names":["Loader","ResourceLoader","constructor","baseUrl","concurrency","EventEmitter","call","i","_pixiMiddleware","length","use","onStart","add","l","emit","onLoad","r","onProgress","onError","e","onComplete","addPixiMiddleware","fn","push","destroy","removeAllListeners","textureParser","spritesheetParser"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,MAAMA,MAAN,SAAqBC,wBAArB,CAAoC;AACjDC,EAAAA,WAAW,CAACC,OAAD,EAAUC,WAAV,EAAuB;AAChC,UAAMD,OAAN,EAAeC,WAAf;;AACAC,0BAAaC,IAAb,CAAkB,IAAlB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,MAAM,CAACQ,eAAP,CAAuBC,MAA3C,EAAmD,EAAEF,CAArD,EAAwD;AACtD,WAAKG,GAAL,CAASV,MAAM,CAACQ,eAAP,CAAuBD,CAAvB,GAAT;AACD;;AAED,SAAKI,OAAL,CAAaC,GAAb,CAAiBC,CAAC,IAAI,KAAKC,IAAL,CAAU,OAAV,EAAmBD,CAAnB,CAAtB;AACA,SAAKE,MAAL,CAAYH,GAAZ,CAAgB,CAACC,CAAD,EAAIG,CAAJ,KAAU,KAAKF,IAAL,CAAU,MAAV,EAAkBD,CAAlB,EAAqBG,CAArB,CAA1B;AACA,SAAKC,UAAL,CAAgBL,GAAhB,CAAoB,CAACC,CAAD,EAAIG,CAAJ,KAAU,KAAKF,IAAL,CAAU,UAAV,EAAsBD,CAAtB,EAAyBG,CAAzB,CAA9B;AACA,SAAKE,OAAL,CAAaN,GAAb,CAAiB,CAACO,CAAD,EAAIN,CAAJ,EAAOG,CAAP,KAAa,KAAKF,IAAL,CAAU,OAAV,EAAmBK,CAAnB,EAAsBN,CAAtB,EAAyBG,CAAzB,CAA9B;AACA,SAAKI,UAAL,CAAgBR,GAAhB,CAAoB,CAACC,CAAD,EAAIG,CAAJ,KAAU,KAAKF,IAAL,CAAU,UAAV,EAAsBD,CAAtB,EAAyBG,CAAzB,CAA9B;AACD;;AAEuB,SAAjBK,iBAAiB,CAACC,EAAD,EAAK;AAC3BtB,IAAAA,MAAM,CAACQ,eAAP,CAAuBe,IAAvB,CAA4BD,EAA5B;AACD;;AAEDE,EAAAA,OAAO,GAAG;AACR,SAAKC,kBAAL;AACA,UAAMD,OAAN;AACD;;AAvBgD;;;AA0BnD,oBAAQxB,MAAR,EAAgBK,qBAAhB;AACAL,MAAM,CAACQ,eAAP,GAAyB,CAACkB,sBAAD,EAAgBC,0BAAhB,CAAzB","sourcesContent":["import EventEmitter from \"eventemitter3\";\nimport textureParser from \"./textureParser\";\nimport { inherit } from \"../utils\";\nimport { Resource, ResourceLoader } from \"../resource\";\nimport spritesheetParser from \"./spritesheetParser\";\n\nexport default class Loader extends ResourceLoader {\n  constructor(baseUrl, concurrency) {\n    super(baseUrl, concurrency);\n    EventEmitter.call(this);\n\n    for (let i = 0; i < Loader._pixiMiddleware.length; ++i) {\n      this.use(Loader._pixiMiddleware[i]());\n    }\n\n    this.onStart.add(l => this.emit(\"start\", l));\n    this.onLoad.add((l, r) => this.emit(\"load\", l, r));\n    this.onProgress.add((l, r) => this.emit(\"progress\", l, r));\n    this.onError.add((e, l, r) => this.emit(\"error\", e, l, r));\n    this.onComplete.add((l, r) => this.emit(\"complete\", l, r));\n  }\n\n  static addPixiMiddleware(fn) {\n    Loader._pixiMiddleware.push(fn);\n  }\n\n  destroy() {\n    this.removeAllListeners();\n    super.destroy();\n  }\n}\n\ninherit(Loader, EventEmitter);\nLoader._pixiMiddleware = [textureParser, spritesheetParser];\n"],"file":"loader.js"}