{"version":3,"sources":["../../src/polyfill/requestAnimationFrame.js"],"names":["ONE_FRAME_TIME","Date","now","prototype","getTime","global","performance","startTime","lastTime","vendors","x","length","requestAnimationFrame","p","cancelAnimationFrame","callback","TypeError","currentTime","delay","setTimeout","id","clearTimeout"],"mappings":";;AAAA,IAAMA,cAAc,GAAG,EAAvB,C,CAEA;;AACA,IAAI,EAAEC,IAAI,CAACC,GAAL,IAAYD,IAAI,CAACE,SAAL,CAAeC,OAA7B,CAAJ,EAA2C;AACzCH,EAAAA,IAAI,CAACC,GAAL,GAAW,SAASA,GAAT,GAAe;AACxB,WAAO,IAAID,IAAJ,GAAWG,OAAX,EAAP;AACD,GAFD;AAGD,C,CAED;;;AACA,IAAI,EAAEC,MAAM,CAACC,WAAP,IAAsBD,MAAM,CAACC,WAAP,CAAmBJ,GAA3C,CAAJ,EAAqD;AACnD,MAAMK,SAAS,GAAGN,IAAI,CAACC,GAAL,EAAlB;;AAEA,MAAI,CAACG,MAAM,CAACC,WAAZ,EAAyB;AACvBD,IAAAA,MAAM,CAACC,WAAP,GAAqB,EAArB;AACD;;AAEDD,EAAAA,MAAM,CAACC,WAAP,CAAmBJ,GAAnB,GAAyB,MAAMD,IAAI,CAACC,GAAL,KAAaK,SAA5C;AACD,C,CAED;;;AACA,IAAIC,QAAQ,GAAGP,IAAI,CAACC,GAAL,EAAf;AACA,IAAMO,OAAO,GAAG,CAAC,IAAD,EAAO,KAAP,EAAc,QAAd,EAAwB,GAAxB,CAAhB;;AAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,OAAO,CAACE,MAAZ,IAAsB,CAACN,MAAM,CAACO,qBAA9C,EAAqE,EAAEF,CAAvE,EAA0E;AACxE,MAAMG,CAAC,GAAGJ,OAAO,CAACC,CAAD,CAAjB;AAEAL,EAAAA,MAAM,CAACO,qBAAP,GAA+BP,MAAM,CAAIQ,CAAJ,2BAArC;AACAR,EAAAA,MAAM,CAACS,oBAAP,GACET,MAAM,CAAIQ,CAAJ,0BAAN,IACAR,MAAM,CAAIQ,CAAJ,iCAFR;AAGD;;AAED,IAAI,CAACR,MAAM,CAACO,qBAAZ,EAAmC;AACjCP,EAAAA,MAAM,CAACO,qBAAP,GAA+BG,QAAQ,IAAI;AACzC,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAIC,SAAJ,CAAiBD,QAAjB,uBAAN;AACD;;AAED,QAAME,WAAW,GAAGhB,IAAI,CAACC,GAAL,EAApB;AACA,QAAIgB,KAAK,GAAGlB,cAAc,GAAGQ,QAAjB,GAA4BS,WAAxC;;AAEA,QAAIC,KAAK,GAAG,CAAZ,EAAe;AACbA,MAAAA,KAAK,GAAG,CAAR;AACD;;AAEDV,IAAAA,QAAQ,GAAGS,WAAX;AAEA,WAAOE,UAAU,CAAC,MAAM;AACtBX,MAAAA,QAAQ,GAAGP,IAAI,CAACC,GAAL,EAAX;AACAa,MAAAA,QAAQ,CAACT,WAAW,CAACJ,GAAZ,EAAD,CAAR;AACD,KAHgB,EAGdgB,KAHc,CAAjB;AAID,GAlBD;AAmBD;;AAED,IAAI,CAACb,MAAM,CAACS,oBAAZ,EAAkC;AAChCT,EAAAA,MAAM,CAACS,oBAAP,GAA8BM,EAAE,IAAIC,YAAY,CAACD,EAAD,CAAhD;AACD","sourcesContent":["const ONE_FRAME_TIME = 16;\n\n// Date.now\nif (!(Date.now && Date.prototype.getTime)) {\n  Date.now = function now() {\n    return new Date().getTime();\n  };\n}\n\n// performance.now\nif (!(global.performance && global.performance.now)) {\n  const startTime = Date.now();\n\n  if (!global.performance) {\n    global.performance = {};\n  }\n\n  global.performance.now = () => Date.now() - startTime;\n}\n\n// requestAnimationFrame\nlet lastTime = Date.now();\nconst vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\nfor (let x = 0; x < vendors.length && !global.requestAnimationFrame; ++x) {\n  const p = vendors[x];\n\n  global.requestAnimationFrame = global[`${p}RequestAnimationFrame`];\n  global.cancelAnimationFrame =\n    global[`${p}CancelAnimationFrame`] ||\n    global[`${p}CancelRequestAnimationFrame`];\n}\n\nif (!global.requestAnimationFrame) {\n  global.requestAnimationFrame = callback => {\n    if (typeof callback !== \"function\") {\n      throw new TypeError(`${callback}is not a function`);\n    }\n\n    const currentTime = Date.now();\n    let delay = ONE_FRAME_TIME + lastTime - currentTime;\n\n    if (delay < 0) {\n      delay = 0;\n    }\n\n    lastTime = currentTime;\n\n    return setTimeout(() => {\n      lastTime = Date.now();\n      callback(performance.now());\n    }, delay);\n  };\n}\n\nif (!global.cancelAnimationFrame) {\n  global.cancelAnimationFrame = id => clearTimeout(id);\n}\n"],"file":"requestAnimationFrame.js"}